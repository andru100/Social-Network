{"ast":null,"code":"var _jsxFileName = \"/home/andru/Documents/work/portfolio/social-network-frontend-portfolio/src/routes/ProfileSetup.jsx\",\n    _s = $RefreshSig$();\n\nimport { getMultipleAccounts } from '@project-serum/anchor/dist/cjs/utils/rpc';\nimport { useEffect, useState } from 'react';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport ChkAuth from '../chkAuth';\nimport bkpic from './profbkup.jpg'; // with import\n\nimport addPhotoIcon from './addphoto.png';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function RenderProfileSetup(props) {\n  _s();\n\n  const [sessionUser, setSessionUser] = useState(\"nonw\");\n  const [auth, setAuth] = useState(false);\n  const [dp, setDp] = useState(false); // use hide/show div\n\n  const Navigate = useNavigate();\n  var {\n    user\n  } = useParams();\n  let userName = user;\n  useEffect(() => {\n    ChkAuth().then(user => {\n      if (user) {\n        setAuth(true);\n        setSessionUser(user);\n      } else {\n        setAuth(false);\n        setSessionUser(false);\n        alert(\"You need to sign in to view this page\");\n        Navigate(\"/signIn\");\n      }\n    });\n  }, []);\n  const [cmt, setcmt] = useState({\n    Posts: [],\n    Photos: []\n  });\n  useEffect(() => {\n    //alert(\"useeffect\")\n    getCmt().then(cmtz => {\n      if (cmtz) {\n        setcmt(cmtz);\n        console.log(\"returned users data object\", cmtz);\n      }\n    });\n  }, []);\n\n  function goToProfile() {\n    Navigate(\"/profile/x/\" + sessionUser);\n  }\n\n  function Logout() {\n    localStorage.removeItem('jwt_token'); //alert(\"deleted jwt\")\n\n    Navigate(\"/\");\n  }\n\n  async function getCmt() {\n    // sends username, password from input server then creates s3 bucket in username and stores details on mongo\n    // data to be sent in request to api includinb id of mongodb document\n    let data = {\n      Username: userName,\n      Data: \"\"\n    }; // object containing fetch options for the put request\n\n    let options = {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(data)\n    };\n    let Url = 'http://192.168.1.93:4001/getCmt'; // post request using options object\n\n    console.time(\"put response took\");\n    let response = await fetch(Url, options);\n    let convert = await response.json();\n    console.timeEnd(\"put response took\");\n    console.log(\"got comment is:\");\n    console.log(convert);\n\n    if (response.status === 401 || response.status === 400) {// handle not a match \n    } else if (response.status === 200) {\n      // if password is a match return auth'd username\n      console.log(\"found post data\");\n      console.log(convert.Posts);\n      return convert;\n    }\n  }\n\n  async function updateBio() {\n    // sends username, password from input server then creates s3 bucket in username and stores details on mongo\n    const bio = document.getElementById('bioBox').value; // get username password and email\n    // data to be sent in request to api includinb id of mongodb document\n\n    let data = {\n      Username: userName,\n      Updatetype: '$set',\n      Key2updt: 'Bio',\n      Value2updt: bio\n    }; // object containing fetch options for the put request\n\n    let options = {\n      method: 'PUT',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(data)\n    };\n    let postUrl = 'http://192.168.1.93:4001/updatebio'; // post request using options object\n\n    console.time(\"put response took\");\n    let response = await fetch(postUrl, options);\n    let convert = await response.json();\n    console.timeEnd(\"put response took\");\n    console.log(\"Put completed updated document is:\");\n    console.log(convert);\n\n    if (response.status === 401 || response.status === 400) {\n      // handle not a match\n      alert(\"your bio didnt save try again\");\n    } else if (response.status === 200) {\n      // if password is a match return auth'd username\n      console.log(\"saved bio\");\n      setcmt(convert);\n      setDp(!dp);\n    }\n  }\n\n  function triggerClick(event) {\n    // clicking image triggers upload button click\n    var myButton = document.getElementById(event.target.name);\n\n    if (myButton) {\n      myButton.click();\n    }\n  } // standard post\n\n\n  async function addPhotos(event) {\n    if (event) {\n      let file = event.target.files[0];\n      var data = new FormData();\n      data.append('file', file); // add the file to the form\n\n      data.append('user', userName);\n      data.append('type', 'addPhotos');\n      let options = {\n        method: 'POST',\n        body: data\n      }; //Create url to post file passing the username and pic number for storage\n\n      let signinurl = 'http://192.168.1.93:4001/postfile/' + userName; // post the json\n\n      let response = await fetch(signinurl, options);\n      let convert = await response.json();\n\n      if (response.status === 401 || response.status === 400) {\n        // handle not a match\n        alert(\"your pic didnt save try again\");\n      } else if (response.status === 200) {\n        // if password is a match return auth'd username\n        console.log(\"added pic to users photos\");\n        setcmt(convert);\n      }\n    }\n  }\n\n  ;\n\n  async function handleSubmission(event) {\n    if (event) {\n      let file = event.target.files[0];\n      var data = new FormData();\n      data.append('file', file); // add the file to the form\n\n      data.append('user', userName);\n      data.append('type', 'profPic');\n      let options = {\n        method: 'POST',\n        body: data\n      }; //Create url to post file passing the username and pic number for storage\n\n      let signinurl = 'http://192.168.1.93:4001/postfile/' + userName; // post the json\n\n      let response = await fetch(signinurl, options);\n      let convert = await response.json();\n      console.log(convert.Imgaddy);\n      document.getElementById(\"profpic11\").src = convert.Profpic; // get posted img address and change profile picture\n    }\n  }\n\n  ;\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"login100-form-title p-b-53\",\n      children: \"Create your profile\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 15\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row\",\n      align: \"center\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-4 mb-3\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"profpics\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            className: \"profpics\",\n            id: \"profpic11\",\n            name: \"profpic1\",\n            onClick: triggerClick,\n            alt: \"alt\",\n            src: bkpic,\n            \"data-holder-Rendered\": \"true\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 200,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 23\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"visually-hidden\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"profpic1\",\n            type: \"file\",\n            className: \"blocked\",\n            onChange: handleSubmission,\n            name: \"uploader1\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 210,\n            columnNumber: 35\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 29\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 19\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-4 mb-3\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 23\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"visually-hidden\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"profpic2\",\n            type: \"file\",\n            className: \"blocked\",\n            onChange: addPhotos,\n            name: \"uploader2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 226,\n            columnNumber: 35\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 29\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 19\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-t-13 p-b-9\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 15\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"wrap-input100 validate-input\",\n      children: cmt.Bio ? cmt.Bio : \"You haven't added a bio yet. Click to add one now!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 15\n    }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n      href: \"#\",\n      className: \"btn btn-sm btn-info mb-2\",\n      onClick: () => {\n        setDp(!dp);\n      },\n      children: \"Edit Bio\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 15\n    }, this), dp && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"wrap-input100 validate-input\",\n        style: {\n          display: dp\n        },\n        children: [\"\\u200B\", /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"txt10\",\n          children: \"About Me\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 20\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: /*#__PURE__*/_jsxDEV(\"textarea\", {\n            id: \"bioBox\",\n            rows: \"50\",\n            cols: \"70\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 245,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 19\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container-login100-form-btn m-t-17\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"login100-form-btn\",\n          type: \"button\",\n          onClick: () => {\n            updateBio();\n          },\n          children: \"Save Changes\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 249,\n          columnNumber: 19\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true), sessionUser === user ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-full text-center p-t-55\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"connected-container\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"gif-grid\",\n          children: cmt.Photos.map(pic => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"gif-item\",\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: pic,\n              alt: pic\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 262,\n              columnNumber: 29\n            }, this)\n          }, pic, false, {\n            fileName: _jsxFileName,\n            lineNumber: 261,\n            columnNumber: 25\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 258,\n          columnNumber: 19\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 256,\n      columnNumber: 15\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 15\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"a\", {\n        href: \"#\",\n        className: \"btn btn-sm btn-info mb-2\",\n        onClick: () => {\n          triggerClick();\n        },\n        children: \"Add Photo\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 15\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-full text-center p-t-55\",\n      children: [/*#__PURE__*/_jsxDEV(\"a\", {\n        href: \"#\",\n        className: \"btn btn-sm btn-info mb-2\",\n        onClick: () => {\n          goToProfile();\n        },\n        children: \"View Profile\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 280,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n        href: \"#\",\n        className: \"btn btn-sm btn-info mb-2\",\n        onClick: () => {\n          Logout();\n        },\n        children: \"Log Out\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 281,\n        columnNumber: 15\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 15\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 284,\n      columnNumber: 15\n    }, this)]\n  }, void 0, true);\n}\n\n_s(RenderProfileSetup, \"WB/J5xSgovza5f3cUIoWO1ply5o=\", false, function () {\n  return [useNavigate, useParams];\n});\n\n_c = RenderProfileSetup;\n\nvar _c;\n\n$RefreshReg$(_c, \"RenderProfileSetup\");","map":{"version":3,"sources":["/home/andru/Documents/work/portfolio/social-network-frontend-portfolio/src/routes/ProfileSetup.jsx"],"names":["getMultipleAccounts","useEffect","useState","useNavigate","useParams","ChkAuth","bkpic","addPhotoIcon","RenderProfileSetup","props","sessionUser","setSessionUser","auth","setAuth","dp","setDp","Navigate","user","userName","then","alert","cmt","setcmt","Posts","Photos","getCmt","cmtz","console","log","goToProfile","Logout","localStorage","removeItem","data","Username","Data","options","method","headers","body","JSON","stringify","Url","time","response","fetch","convert","json","timeEnd","status","updateBio","bio","document","getElementById","value","Updatetype","Key2updt","Value2updt","postUrl","triggerClick","event","myButton","target","name","click","addPhotos","file","files","FormData","append","signinurl","handleSubmission","Imgaddy","src","Profpic","Bio","display","map","pic"],"mappings":"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","sourcesContent":["import { getMultipleAccounts } from '@project-serum/anchor/dist/cjs/utils/rpc';\nimport { useEffect, useState} from 'react'\nimport { useNavigate, useParams } from 'react-router-dom';\nimport ChkAuth from '../chkAuth';\nimport bkpic from './profbkup.jpg'; // with import\nimport addPhotoIcon from './addphoto.png'; \n \n\n\nexport default function RenderProfileSetup (props) { \n  const [sessionUser, setSessionUser] = useState (\"nonw\")\n  const [auth, setAuth] = useState (false);\n  const [dp, setDp] = useState(false); // use hide/show div\n  const Navigate = useNavigate();\n  var {user} = useParams()\n  let userName = user\n\n\n\n  useEffect( () => {\n    ChkAuth().then(user => {\n      if (user) {\n      setAuth(true)\n      setSessionUser(user)\n      } else {\n         setAuth(false)\n         setSessionUser(false)\n         alert(\"You need to sign in to view this page\")\n         Navigate(\"/signIn\")\n      }\n    })\n  },[]);\n\n\n  const[cmt, setcmt] = useState({Posts:[], Photos: []})\n\n  useEffect( () => {\n     //alert(\"useeffect\")\n     getCmt().then(cmtz => {\n       if (cmtz) {\n       setcmt(cmtz)\n       console.log(\"returned users data object\", cmtz)\n       }\n     })\n   },[]);\n  \n  function goToProfile (){\n    Navigate (\"/profile/x/\"+sessionUser)\n  }\n  \n  function Logout (){\n    localStorage.removeItem('jwt_token')\n    //alert(\"deleted jwt\")\n    Navigate (\"/\")\n  }\n\n  async function getCmt () { // sends username, password from input server then creates s3 bucket in username and stores details on mongo\n  \n      \n    // data to be sent in request to api includinb id of mongodb document\n  let data = {Username: userName, Data: \"\"}\n\n  // object containing fetch options for the put request\n  let options = {\n  method: 'POST',\n  headers: {\n    'Content-Type': 'application/json',\n  },\n  body: JSON.stringify(data),\n  }\n\n  let Url = 'http://192.168.1.93:4001/getCmt'\n  // post request using options object\n  console.time(\"put response took\");\n  let response = await fetch(Url, options)\n  let convert = await response.json ()\n  console.timeEnd(\"put response took\");\n  console.log(\"got comment is:\")\n  console.log(convert)\n\n  if ( response.status === 401 || response.status === 400){// handle not a match \n  } else if ( response.status === 200){ // if password is a match return auth'd username\n    console.log(\"found post data\")\n    console.log(convert.Posts)\n\n       return convert\n  }\n   \n}\n\n\n  async function updateBio () { // sends username, password from input server then creates s3 bucket in username and stores details on mongo\n    \n    const bio = document.getElementById('bioBox').value;// get username password and email\n      \n      // data to be sent in request to api includinb id of mongodb document\n    let data = {Username: userName, Updatetype: '$set',\n                Key2updt: 'Bio', Value2updt: bio\n    }\n\n    // object containing fetch options for the put request\n    let options = {\n    method: 'PUT',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify(data),\n    }\n\n    let postUrl = 'http://192.168.1.93:4001/updatebio'\n    // post request using options object\n    console.time(\"put response took\");\n    let response = await fetch(postUrl, options)\n    let convert = await response.json ()\n    console.timeEnd(\"put response took\");\n    console.log(\"Put completed updated document is:\")\n    console.log(convert)\n\n    if ( response.status === 401 || response.status === 400){// handle not a match\n      alert(\"your bio didnt save try again\")\n    } else if ( response.status === 200){ // if password is a match return auth'd username\n      console.log(\"saved bio\")\n      setcmt(convert)\n      setDp(!dp)\n      \n    }\n  }\n\n  function triggerClick(event){\n    // clicking image triggers upload button click\n    var myButton = document.getElementById(event.target.name);\n    if ( myButton ) {\n      myButton.click()\n    }\n  }\n\n  // standard post\n  async function addPhotos (event) {\n    if (event) {\n      let file = (event.target.files[0])\n      var data = new FormData() \n      data.append('file', file) // add the file to the form\n      data.append('user', userName)\n      data.append('type', 'addPhotos')\n    \n      let options = {\n        method: 'POST',\n        body: data, \n      }\n      //Create url to post file passing the username and pic number for storage\n      let signinurl = 'http://192.168.1.93:4001/postfile/' + userName \n\n      // post the json\n      let response = await fetch(signinurl, options)\n      let convert = await response.json ()\n      if ( response.status === 401 || response.status === 400){// handle not a match\n        alert(\"your pic didnt save try again\")\n       } else if ( response.status === 200){ // if password is a match return auth'd username\n        console.log(\"added pic to users photos\")\n        setcmt(convert)\n        \n       }\n      \n    }\n  };\n\n   async function handleSubmission (event) {\n    if (event) {\n      let file = (event.target.files[0])\n      var data = new FormData() \n      data.append('file', file) // add the file to the form\n      data.append('user', userName)\n      data.append('type', 'profPic')\n    \n      let options = {\n        method: 'POST',\n        body: data, \n      }\n      //Create url to post file passing the username and pic number for storage\n      let signinurl = 'http://192.168.1.93:4001/postfile/' + userName\n\n      // post the json\n      let response = await fetch(signinurl, options)\n      let convert = await response.json ()\n      console.log(convert.Imgaddy)\n      document.getElementById(\"profpic11\").src = convert.Profpic // get posted img address and change profile picture\n      \n    }\n  };\n\n  return (\n            <>\n              <span className=\"login100-form-title p-b-53\">\n                Create your profile\n              </span>\n                {/*  <!--profpic1--> */}\n                <div className=\"row\" align=\"center\">\n                    <div className=\"col-md-4 mb-3\" >\n                      <div className=\"profpics\">\n                        <img className=\"profpics\" id= \"profpic11\" name=\"profpic1\"  onClick={triggerClick} alt=\"alt\" src={bkpic}  \n                          data-holder-Rendered=\"true\"/>\n                      </div>\n                      \n\n                  </div>\n                  <div className=\"visually-hidden\">\n                        {/* <!--the picture click triggers a click of find file button using its name prop to pass to func and use as id then same for onChange to upload button.. chain of name = next elements id--> */}\n                      \n                            <div>\n                                  <input id=\"profpic1\" type=\"file\" className=\"blocked\" onChange={handleSubmission}  name= \"uploader1\"/>\n                            </div>\n                            {/* <button type=\"button\" id=\"uploader1\" name=\"profpic1\" onClick=\"(uploadpic(this.name))\" className=\"blocked\">Upload</button> */}\n                      \n                    </div>\n                      {/* <!--profpic2--> */}\n                      <div className=\"col-md-4 mb-3\" >\n                      \n                       \n                       \n\n                  </div>\n                  <div className=\"visually-hidden\">\n                        {/* <!--the picture click triggers a click of find file button using its name prop to pass to func and use as id then same for onChange to upload button.. chain of name = next elements id--> */}\n                      \n                            <div>\n                                  <input id=\"profpic2\" type=\"file\" className=\"blocked\" onChange={addPhotos}  name= \"uploader2\"/>\n                            </div>\n                            {/* <button type=\"button\" id=\"uploader1\" name=\"profpic1\" onClick=\"(uploadpic(this.name))\" className=\"blocked\">Upload</button> */}\n                      \n                    </div>\n                      \n                </div>                   \n              <div className=\"p-t-13 p-b-9\">\n                \n              </div>\n              <div className=\"wrap-input100 validate-input\">{cmt.Bio ? cmt.Bio : \"You haven't added a bio yet. Click to add one now!\"}</div>\n\n              <a href=\"#\" className=\"btn btn-sm btn-info mb-2\" onClick={() => {setDp(!dp)}}>Edit Bio</a>\n              {dp && \n              <>\n                <div className=\"wrap-input100 validate-input\" style={{ display: dp }}>\n                  â€‹<span className=\"txt10\">\n                    About Me\n                  </span> \n                  <span><textarea id=\"bioBox\" rows=\"50\" cols=\"70\"></textarea></span>\n                </div>\n\n                <div className=\"container-login100-form-btn m-t-17\">\n                  <button className=\"login100-form-btn\" type=\"button\" onClick={() =>{updateBio()}}>\n                    Save Changes\n                  </button>\n                </div>\n              </>\n              }\n              {sessionUser === user ?\n              <div className=\"w-full text-center p-t-55\">\n                <div className=\"connected-container\">\n                  <div className=\"gif-grid\">\n                  {/* Map through gifList instead of TEST_GIFS */}\n                      {cmt.Photos.map((pic) => (\n                        <div className=\"gif-item\" key={pic}>\n                            <img src={pic} alt={pic} />\n                        </div>\n                      ))}\n                  </div>\n                </div>\n              </div>\n              \n              : \n              <div></div> \n              }\n              <div>\n                <a href=\"#\" className=\"btn btn-sm btn-info mb-2\" onClick={() => {triggerClick()}}>Add Photo</a>\n\n                {/* <img className=\"addPhoto\"  id= \"profpic21\" name=\"profpic2\" onClick={triggerClick} alt=\"100x100\" src={addPhotoIcon} \n                          data-holder-Rendered=\"true\"/> */}\n              </div> \n              <div className=\"w-full text-center p-t-55\">\n              <a href=\"#\" className=\"btn btn-sm btn-info mb-2\" onClick={() => {goToProfile()}}>View Profile</a>\n              <div></div>\n              <a href=\"#\" className=\"btn btn-sm btn-info mb-2\" onClick={() => {Logout()}}>Log Out</a>\n              \n              </div>\n              <div>\n              \n              </div>\n            </>\n          )\n}"]},"metadata":{},"sourceType":"module"}