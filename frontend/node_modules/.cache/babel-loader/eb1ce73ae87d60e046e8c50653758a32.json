{"ast":null,"code":"export default async function chkauth() {\n  //chk if jwt is valied for page used by each html on every load\n  let jwt = localStorage.getItem('jwt_token');\n  console.log(\"got from storage:\", jwt);\n  let jwtObject = {\n    Data1: jwt\n  };\n  let options = {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(jwtObject)\n  };\n  let url = 'http://192.168.1.93:4001/chkauth'; // post request to check sign in details\n  //console.time(\"signin response took\");\n\n  let response = await fetch(url, options); // post jwt\n\n  let convert = await response.json(); //console.timeEnd(\"signin response took\");\n\n  console.log(\"User password check complete:\");\n  console.log(response.status); //response = post(jwt, \"chkauth\")\n\n  if (response.status === 401) {\n    // handle not a match\n    alert(\"you not authorized to view this page please sign in\");\n    return false; //window.location.href = \"signin.html\";     \n  } else if (response.status === 200) {\n    // if password is a match redirect to profile page\n    console.log(\"authorized by api\", convert.AuthdUser);\n    setAuth(true);\n    setSessionUser = convert.AuthdUser;\n  }\n}","map":{"version":3,"sources":["/home/andru/Documents/work/Dating-react-frontend/my-app/src/chkAuth.jsx"],"names":["chkauth","jwt","localStorage","getItem","console","log","jwtObject","Data1","options","method","headers","body","JSON","stringify","url","response","fetch","convert","json","status","alert","AuthdUser","setAuth","setSessionUser"],"mappings":"AAAA,eAAe,eAAeA,OAAf,GAAyB;AAAC;AACrC,MAAIC,GAAG,GAAGC,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAV;AACAC,EAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ,EAAiCJ,GAAjC;AAEA,MAAIK,SAAS,GAAG;AACdC,IAAAA,KAAK,EAAEN;AADO,GAAhB;AAIA,MAAIO,OAAO,GAAG;AACZC,IAAAA,MAAM,EAAE,MADI;AAEZC,IAAAA,OAAO,EAAE;AACP,sBAAgB;AADT,KAFG;AAKZC,IAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeP,SAAf;AALM,GAAd;AAQE,MAAIQ,GAAG,GAAG,kCAAV,CAhBkC,CAkBlC;AACA;;AACA,MAAIC,QAAQ,GAAG,MAAMC,KAAK,CAACF,GAAD,EAAMN,OAAN,CAA1B,CApBkC,CAoBM;;AACxC,MAAIS,OAAO,GAAG,MAAMF,QAAQ,CAACG,IAAT,EAApB,CArBkC,CAsBlC;;AACAd,EAAAA,OAAO,CAACC,GAAR,CAAY,+BAAZ;AACAD,EAAAA,OAAO,CAACC,GAAR,CAAYU,QAAQ,CAACI,MAArB,EAxBkC,CA0BpC;;AACA,MAAKJ,QAAQ,CAACI,MAAT,KAAoB,GAAzB,EAA6B;AAAC;AAC5BC,IAAAA,KAAK,CAAC,qDAAD,CAAL;AACA,WAAO,KAAP,CAF2B,CAG3B;AACA,GAJF,MAIQ,IAAKL,QAAQ,CAACI,MAAT,KAAoB,GAAzB,EAA6B;AAAE;AACrCf,IAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ,EAAiCY,OAAO,CAACI,SAAzC;AACAC,IAAAA,OAAO,CAAC,IAAD,CAAP;AACAC,IAAAA,cAAc,GAAGN,OAAO,CAACI,SAAzB;AACA;AACL","sourcesContent":["export default async function chkauth (){//chk if jwt is valied for page used by each html on every load\n    let jwt = localStorage.getItem('jwt_token');\n    console.log(\"got from storage:\", jwt)\n\n    let jwtObject = {\n      Data1: jwt\n    }\n\n    let options = {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(jwtObject),\n      }\n      \n      let url = 'http://192.168.1.93:4001/chkauth'\n    \n      // post request to check sign in details\n      //console.time(\"signin response took\");\n      let response = await fetch(url, options)// post jwt\n      let convert = await response.json ()\n      //console.timeEnd(\"signin response took\");\n      console.log(\"User password check complete:\")\n      console.log(response.status)\n\n    //response = post(jwt, \"chkauth\")\n    if ( response.status === 401){// handle not a match\n      alert(\"you not authorized to view this page please sign in\")\n      return false\n      //window.location.href = \"signin.html\";     \n     } else if ( response.status === 200){ // if password is a match redirect to profile page\n      console.log(\"authorized by api\", convert.AuthdUser)\n      setAuth(true)\n      setSessionUser = convert.AuthdUser\n     }\n} "]},"metadata":{},"sourceType":"module"}