{"ast":null,"code":"var _jsxFileName = \"/home/andru/Documents/work/portfolio/social-network-frontend-portfolio/src/routes/ProfileSetup.jsx\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from 'react';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport ChkAuth from '../chkAuth';\nimport bkpic from '../images/profbkup.jpg';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function RenderProfileSetup() {\n  _s();\n\n  const [sessionUser, setSessionUser] = useState(\"\");\n  const [cmt, setcmt] = useState({\n    Posts: [],\n    Photos: []\n  });\n  const [dp, setDp] = useState(false); // hide/show div\n\n  const Navigate = useNavigate();\n  var {\n    user\n  } = useParams();\n  let userName = user;\n  useEffect(() => {\n    ChkAuth().then(user => {\n      if (user) {\n        setSessionUser(user);\n        getCmt().then(cmtz => {\n          if (cmtz) {\n            setcmt(cmtz);\n            console.log(\"returned users data object\", cmtz);\n          }\n        });\n      } else {\n        setSessionUser(false);\n        alert(\"You need to sign in to view this page\");\n        Navigate(\"/signIn\");\n      }\n    });\n  }, []);\n\n  function goToProfile() {\n    Navigate(\"/profile/x/\" + sessionUser);\n  }\n\n  function Logout() {\n    localStorage.removeItem('jwt_token');\n    Navigate(\"/\");\n  }\n\n  async function getCmt() {\n    // gets users data object\n    let data = {\n      Username: userName,\n      Data: \"\"\n    };\n    let options = {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(data)\n    };\n    let Url = 'http://192.168.1.93:4001/getCmt';\n    let response = await fetch(Url, options);\n    let convert = await response.json();\n\n    if (response.status === 401 || response.status === 400) {\n      // handle not a match \n      console.log(\"error fetching, returned data is:\", response);\n    } else if (response.status === 200) {\n      console.log(\"found users data:\", convert);\n      return convert;\n    }\n  }\n\n  async function updateBio() {\n    const bio = document.getElementById('bioBox').value; // get username, password and email.\n\n    let data = {\n      Username: userName,\n      Updatetype: '$set',\n      Key2updt: 'Bio',\n      Value2updt: bio\n    };\n    let options = {\n      method: 'PUT',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(data)\n    };\n    let postUrl = 'http://192.168.1.93:4001/updatebio';\n    let response = await fetch(postUrl, options);\n    let convert = await response.json();\n\n    if (response.status === 401 || response.status === 400) {\n      alert(\"your bio didnt save try again\");\n    } else if (response.status === 200) {\n      console.log(\"saved bio\");\n      setcmt(convert); // store users data object\n\n      setDp(!dp); // show bio edit box\n    }\n  }\n\n  async function addPhotos(event) {\n    if (event) {\n      alert(\"in add photos\");\n      let file = event.target.files[0];\n      var data = new FormData();\n      data.append('file', file);\n      data.append('user', userName);\n      data.append('type', 'addPhotos');\n      let options = {\n        method: 'POST',\n        body: data\n      };\n      let postUrl = 'http://192.168.1.93:4001/postfile/' + userName;\n      let response = await fetch(postUrl, options);\n      let convert = await response.json();\n\n      if (response.status === 401 || response.status === 400) {\n        alert(\"your pic didn't save try again\");\n      } else if (response.status === 200) {\n        console.log(\"added pic to users photos\");\n        setcmt(convert);\n      }\n    }\n  }\n\n  ;\n\n  function triggerClick(event) {\n    // clicking image triggers upload button click\n    var myButton = document.getElementById(event.target.name);\n\n    if (myButton) {\n      myButton.click();\n    }\n  }\n\n  async function addProfilePic(event) {\n    if (event) {\n      let file = event.target.files[0];\n      var data = new FormData();\n      data.append('file', file);\n      data.append('user', userName);\n      data.append('type', 'profPic');\n      let options = {\n        method: 'POST',\n        body: data\n      };\n      let ProfUrl = 'http://192.168.1.93:4001/postfile/' + userName;\n      let response = await fetch(ProfUrl, options);\n      let convert = await response.json();\n      document.getElementById(\"profpic11\").src = convert.Profpic; // get posted img address and change profile picture\n    }\n  }\n\n  ;\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"login100-form-title p-b-53\",\n      children: \"Create your profile\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 15\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"profile-header-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"profile-header-img\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          calssName: \"profpics\",\n          src: cmt.Profpic,\n          alt: \"\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 22\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"profile-header-info\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"m-t-10 m-b-5\",\n          children: user\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"m-b-10\",\n          style: {\n            color: \"black\"\n          },\n          children: cmt.Bio ? cmt.Bio : \"Click the edit profile button to add a bio to your profile now.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"!\",\n          className: \"btn btn-sm btn-info mb-2\",\n          style: {\n            marginRight: \"10px\"\n          },\n          onClick: e => {\n            e.preventDefault();\n            goToProfile();\n          },\n          children: \"View Profile\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"!\",\n          className: \"btn btn-sm btn-info mb-2\",\n          onClick: e => {\n            e.preventDefault();\n            Logout();\n          },\n          children: \"Log Out\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 22\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 15\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-full text-center p-t-55\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 15\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-t-13 p-b-9\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 15\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"wrap-input100 validate-input\",\n      children: cmt.Bio ? cmt.Bio : \"You haven't added a bio yet. Click to add one now!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 15\n    }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n      href: \"!\",\n      className: \"btn btn-sm btn-info mb-2\",\n      onClick: e => {\n        e.preventDefault();\n        setDp(!dp);\n      },\n      children: \"Edit Bio\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 15\n    }, this), dp && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"wrap-input100 validate-input\",\n        style: {\n          display: dp\n        },\n        children: [\"\\u200B\", /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"txt10\",\n          children: \"Max 70 characters\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 20\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: /*#__PURE__*/_jsxDEV(\"textarea\", {\n            maxLength: \"70\",\n            id: \"bioBox\",\n            rows: \"10\",\n            cols: \"10\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 19\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container-login100-form-btn m-t-17\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"login100-form-btn\",\n          type: \"button\",\n          onClick: e => {\n            e.preventDefault();\n            updateBio();\n          },\n          children: \"Save Changes\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 19\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true), sessionUser === user && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-full text-center p-t-55\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"connected-container\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"gif-grid\",\n          children: cmt.Photos.map(pic => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"gif-item\",\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: pic,\n              alt: pic\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 221,\n              columnNumber: 29\n            }, this)\n          }, pic, false, {\n            fileName: _jsxFileName,\n            lineNumber: 220,\n            columnNumber: 25\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 19\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 15\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"a\", {\n        href: \"!\",\n        className: \"btn btn-sm btn-info mb-2\",\n        name: \"mediaUplaod\",\n        onClick: e => {\n          e.preventDefault();\n          triggerClick(e);\n        },\n        children: \"Add Photo\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 15\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"input\", {\n        id: \"mediaUplaod\",\n        type: \"file\",\n        className: \"blocked\",\n        onChange: e => addPhotos(e),\n        name: \"uploader1\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 19\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 15\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 15\n    }, this)]\n  }, void 0, true);\n}\n\n_s(RenderProfileSetup, \"p8+Y/FbrSNCubo+Z23+EWH7HbRg=\", false, function () {\n  return [useNavigate, useParams];\n});\n\n_c = RenderProfileSetup;\n\nvar _c;\n\n$RefreshReg$(_c, \"RenderProfileSetup\");","map":{"version":3,"sources":["/home/andru/Documents/work/portfolio/social-network-frontend-portfolio/src/routes/ProfileSetup.jsx"],"names":["useEffect","useState","useNavigate","useParams","ChkAuth","bkpic","RenderProfileSetup","sessionUser","setSessionUser","cmt","setcmt","Posts","Photos","dp","setDp","Navigate","user","userName","then","getCmt","cmtz","console","log","alert","goToProfile","Logout","localStorage","removeItem","data","Username","Data","options","method","headers","body","JSON","stringify","Url","response","fetch","convert","json","status","updateBio","bio","document","getElementById","value","Updatetype","Key2updt","Value2updt","postUrl","addPhotos","event","file","target","files","FormData","append","triggerClick","myButton","name","click","addProfilePic","ProfUrl","src","Profpic","color","Bio","marginRight","e","preventDefault","display","map","pic"],"mappings":"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","sourcesContent":["import { useEffect, useState} from 'react'\nimport { useNavigate, useParams } from 'react-router-dom';\nimport ChkAuth from '../chkAuth';\nimport bkpic from '../images/profbkup.jpg';\n \n\nexport default function RenderProfileSetup () { \n  const [sessionUser, setSessionUser] = useState (\"\")\n  const[cmt, setcmt] = useState({Posts:[], Photos: []})\n  const [dp, setDp] = useState(false); // hide/show div\n  const Navigate = useNavigate();\n  var {user} = useParams()\n  let userName = user\n\n  useEffect( () => {\n    ChkAuth().then(user => {\n      if (user) {\n        setSessionUser(user)\n        getCmt().then(cmtz => {\n          if (cmtz) {\n          setcmt(cmtz)\n          console.log(\"returned users data object\", cmtz)\n          }\n        })\n      } else {\n         setSessionUser(false)\n         alert(\"You need to sign in to view this page\")\n         Navigate(\"/signIn\")\n      }\n    })\n  },[]);\n\n  function goToProfile (){\n    Navigate (\"/profile/x/\"+sessionUser)\n  }\n  \n  function Logout (){\n    localStorage.removeItem('jwt_token')\n    Navigate (\"/\")\n  }\n\n  async function getCmt () { // gets users data object\n  \n    let data = {Username: userName, Data: \"\"}\n\n    let options = {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify(data),\n    }\n\n    let Url = 'http://192.168.1.93:4001/getCmt'\n    let response = await fetch(Url, options)\n    let convert = await response.json ()\n\n    if ( response.status === 401 || response.status === 400){// handle not a match \n      console.log(\"error fetching, returned data is:\", response)\n    } else if ( response.status === 200){\n      console.log(\"found users data:\", convert)\n      return convert\n    }\n   \n  }\n\n\n  async function updateBio () { \n    \n    const bio = document.getElementById('bioBox').value;// get username, password and email.\n\n    let data = {Username: userName, Updatetype: '$set',\n                Key2updt: 'Bio', Value2updt: bio\n    }\n\n    let options = {\n    method: 'PUT',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify(data),\n    }\n\n    let postUrl = 'http://192.168.1.93:4001/updatebio'\n    let response = await fetch(postUrl, options)\n    let convert = await response.json ()\n\n    if ( response.status === 401 || response.status === 400){\n      alert(\"your bio didnt save try again\")\n    } else if ( response.status === 200){\n      console.log(\"saved bio\")\n      setcmt(convert) // store users data object\n      setDp(!dp) // show bio edit box\n    }\n  }\n\n  async function addPhotos (event) {\n    if (event) {\n      alert(\"in add photos\")\n      let file = (event.target.files[0])\n      var data = new FormData() \n      data.append('file', file)\n      data.append('user', userName)\n      data.append('type', 'addPhotos')\n    \n      let options = {\n        method: 'POST',\n        body: data, \n      }\n\n      let postUrl = 'http://192.168.1.93:4001/postfile/' + userName \n      let response = await fetch(postUrl, options)\n      let convert = await response.json ()\n      if ( response.status === 401 || response.status === 400){\n        alert(\"your pic didn't save try again\")\n       } else if ( response.status === 200){ \n        console.log(\"added pic to users photos\")\n        setcmt(convert)\n       }\n      \n    }\n  };\n\n  function triggerClick(event){ // clicking image triggers upload button click\n    var myButton = document.getElementById(event.target.name);\n    if ( myButton ) {\n      myButton.click()\n    }\n  }\n\n  async function addProfilePic (event) {\n    if (event) {\n      let file = (event.target.files[0])\n      var data = new FormData() \n      data.append('file', file)\n      data.append('user', userName)\n      data.append('type', 'profPic')\n    \n      let options = {\n        method: 'POST',\n        body: data, \n      }\n\n      let ProfUrl = 'http://192.168.1.93:4001/postfile/' + userName\n      let response = await fetch(ProfUrl, options)\n      let convert = await response.json ()\n      document.getElementById(\"profpic11\").src = convert.Profpic // get posted img address and change profile picture\n      \n    }\n  };\n\n  return (\n            <>\n              <span className=\"login100-form-title p-b-53\">\n                Create your profile\n              </span>\n                {/*  <!--profile pic--> */}\n                {/* <div className=\"row\">\n                  <div class=\"col\"></div>\n                  <div class=\"col\"></div>\n                  <div class=\"col\"></div>\n                  <div class=\"col\"></div>\n                    <div className=\"col\" >\n                      <div className=\"profpics\">\n                        {cmt.Profpic ? <img className=\"profpics\" id= \"profpic11\" name=\"profpic1\"  onClick={(e)=>  {e.preventDefault(); triggerClick(e)}} alt=\"alt\" src={cmt.Profpic}  \n                          data-holder-Rendered=\"true\"/> \n                          :\n                          <img className=\"profpics\" id= \"profpic11\" name=\"profpic1\"  onClick={(e)=>  {e.preventDefault(); triggerClick(e)}} alt=\"alt\" src={bkpic}  \n                          data-holder-Rendered=\"true\"/>\n                        }\n                      </div>\n                    </div>\n                  <div className=\"visually-hidden\">\n                      <div>\n                            <input id=\"profpic1\" type=\"file\" className=\"blocked\" onChange={addProfilePic}  name= \"uploader1\"/>\n                      </div>\n                  </div>\n                    <div className=\"col-md-4 mb-3\" >\n                  </div>\n                  <div className=\"visually-hidden\"></div>\n                </div>     */}\n              <div className=\"profile-header-content\">\n                     <div className=\"profile-header-img\">\n                        <img calssName=\"profpics\" src={cmt.Profpic} alt=\"\"/>\n                     </div>\n                     <div className=\"profile-header-info\">\n                        <h4 className=\"m-t-10 m-b-5\">{user}</h4>\n                        <p className=\"m-b-10\" style={{color:\"black\"}}>{cmt.Bio? cmt.Bio : \"Click the edit profile button to add a bio to your profile now.\"}</p>\n                        <a href=\"!\" className=\"btn btn-sm btn-info mb-2\" style={{marginRight:\"10px\"}} onClick={(e) => {e.preventDefault(); goToProfile()}}>View Profile</a>\n                        <a href=\"!\" className=\"btn btn-sm btn-info mb-2\" onClick={(e) => {e.preventDefault(); Logout()}}>Log Out</a>\n                    </div>\n                  </div>\n              <div className=\"w-full text-center p-t-55\">\n              \n              </div>               \n              <div className=\"p-t-13 p-b-9\"></div>\n              <div className=\"wrap-input100 validate-input\">{cmt.Bio ? cmt.Bio : \"You haven't added a bio yet. Click to add one now!\"}</div>\n              <a href=\"!\" className=\"btn btn-sm btn-info mb-2\" onClick={(e) => {e.preventDefault(); setDp(!dp)}}>Edit Bio</a>\n              {dp && \n              <>\n                <div className=\"wrap-input100 validate-input\" style={{ display: dp }}>\n                  â€‹<span className=\"txt10\">\n                    Max 70 characters\n                  </span> \n                  <span><textarea maxLength=\"70\" id=\"bioBox\" rows=\"10\" cols=\"10\"></textarea></span>\n                </div>\n                <div className=\"container-login100-form-btn m-t-17\">\n                  <button className=\"login100-form-btn\" type=\"button\" onClick={(e) =>{e.preventDefault(); updateBio()}}>\n                    Save Changes\n                  </button>\n                </div>\n              </>\n              }\n              {sessionUser === user &&\n              <div className=\"w-full text-center p-t-55\">\n                <div className=\"connected-container\">\n                  <div className=\"gif-grid\">\n                  {/* map through users images */}\n                      {cmt.Photos.map((pic) => (\n                        <div className=\"gif-item\" key={pic}>\n                            <img src={pic} alt={pic} />\n                        </div>\n                      ))}\n                  </div>\n                </div>\n              </div>\n              }\n              <div>\n                <a href=\"!\" className=\"btn btn-sm btn-info mb-2\" name=\"mediaUplaod\" onClick={(e) => {e.preventDefault(); triggerClick(e)}}>Add Photo</a>\n              </div>  \n              <div>\n                  <input id=\"mediaUplaod\" type=\"file\" className=\"blocked\" onChange={(e)=> addPhotos(e)}  name= \"uploader1\"/>\n              </div>\n              <div>\n              </div>\n            </>\n          )\n}"]},"metadata":{},"sourceType":"module"}