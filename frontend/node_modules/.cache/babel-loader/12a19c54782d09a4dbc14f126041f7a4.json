{"ast":null,"code":"var _jsxFileName = \"/home/andru/Documents/work/portfolio/social-network-frontend-portfolio/src/routes/ProfileSetup.jsx\",\n    _s = $RefreshSig$();\n\nimport { getMultipleAccounts } from '@project-serum/anchor/dist/cjs/utils/rpc';\nimport { useEffect, useState } from 'react';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport ChkAuth from '../chkAuth';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function RenderProfileSetup(props) {\n  _s();\n\n  //alert(\"called setup\")\n  //UseState to hold uploaded file for sending\n  const [sessionUser, setSessionUser] = useState(\"nonw\");\n  const [auth, setAuth] = useState(false);\n  const Navigate = useNavigate();\n  let userName = sessionUser;\n  useEffect(() => {\n    //alert(\"useeffect\")\n    ChkAuth().then(user => {\n      if (user) {\n        setAuth(true);\n        setSessionUser(user); //alert(\"user returnedddddd from chkauth\", user)\n      } else {\n        setAuth(false);\n        setSessionUser(false);\n        alert(\"You need to sign in to view this page\");\n        Navigate(\"/signIn\");\n      }\n    });\n  }, []);\n\n  function Logout() {\n    localStorage.removeItem('jwt_token'); //alert(\"deleted jwt\")\n\n    Navigate(\"/\");\n  }\n\n  async function updateBio() {\n    // sends username, password from input server then creates s3 bucket in username and stores details on mongo\n    const bio = document.getElementById('bioBox').value; // get username password and email\n    // data to be sent in request to api includinb id of mongodb document\n\n    let data = {\n      Username: userName,\n      Updatetype: '$set',\n      Key2updt: 'Bio',\n      Value2updt: bio\n    }; // object containing fetch options for the put request\n\n    let options = {\n      method: 'PUT',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(data)\n    };\n    let postUrl = 'http://192.168.1.93:4001/updatebio'; // post request using options object\n\n    console.time(\"put response took\");\n    let response = await fetch(postUrl, options);\n    let convert = await response.json();\n    console.timeEnd(\"put response took\");\n    console.log(\"Put completed updated document is:\");\n    console.log(convert);\n\n    if (response.status === 401 || response.status === 400) {\n      // handle not a match\n      alert(\"your bio didnt save try again\"); // Navigate(\"/signIn\")\n      //return false   \n    } else if (response.status === 200) {\n      // if password is a match return auth'd username\n      console.log(\"saved bio, redirecting to profile page\"); //alert(\"saved\")\n      //document.cookie = \"authjwt=\"+convert.token; // store data in cookie\n      //localStorage.setItem('jwt_token', convert.token) // Store JWT in storage\n      //alert(\"Welcome to the club! Please setup your profile\")\n\n      Navigate(\"/profile/\" + sessionUser);\n    }\n  }\n\n  async function getPics(picNum) {\n    let options = {\n      method: 'GET'\n    };\n    let picUrl = \"https://\" + userName + \"ajh46unique.s3.us-east-2.amazonaws.com/profpic\" + picNum + \".png\";\n    let response = await fetch(picUrl, options);\n\n    if (response.status === 401 || response.status === 400) {\n      // if user img does not exist\n      alert(\"not found\");\n      return \"./profbkup.jpg\"; // return local uplod icon address\n    } else if (response.status === 200) {\n      // if there is img return its src\n      alert(\"pic there\");\n      return picUrl;\n    }\n  }\n\n  function triggerClick(event) {\n    // clicking image triggers upload button click\n    var myButton = document.getElementById(event.target.name);\n\n    if (myButton) {\n      myButton.click();\n    }\n  } // standard post\n\n\n  async function handleSubmission(event) {\n    if (event) {\n      let file = event.target.files[0];\n      let Picnum = event.target.id;\n      var data = new FormData();\n      data.append('file', file); // add the file to the form\n\n      data.append('user', userName);\n      let options = {\n        method: 'POST',\n        body: data\n      }; //Create url to post file passing the username and pic number for storage\n\n      let signinurl = 'http://192.168.1.93:4001/postfile/' + userName + \"/\" + Picnum; // post the json\n\n      let response = await fetch(signinurl, options);\n      let convert = await response.json();\n      console.log(convert.Imgaddy);\n      let newimageurl = convert.Imgaddy; // get posted img address and change profile picture\n\n      let pic2Replace = Picnum + \"1\";\n      document.getElementById(pic2Replace).src = newimageurl;\n    }\n  }\n\n  ;\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"login100-form-title p-b-53\",\n      children: \"Create your profile\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 15\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row\",\n      align: \"center\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-4 mb-3\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"profpics\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            className: \"profpics\",\n            id: \"profpic11\",\n            name: \"profpic1\",\n            onClick: triggerClick,\n            alt: \"alt\",\n            src: \"\",\n            \"data-holder-Rendered\": \"true\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 23\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"visually-hidden\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"profpic1\",\n            type: \"file\",\n            className: \"blocked\",\n            onChange: handleSubmission,\n            name: \"uploader1\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 35\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 29\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 19\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-4 mb-3\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"profpics\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            className: \"profpics\",\n            id: \"profpic21\",\n            name: \"profpic2\",\n            onClick: triggerClick,\n            alt: \"100x100\",\n            src: \"\",\n            \"data-holder-Rendered\": \"true\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 23\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 23\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"visually-hidden\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"profpic2\",\n            type: \"file\",\n            className: \"blocked\",\n            onChange: handleSubmission,\n            name: \"uploader2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 35\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 29\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 19\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-4 mb-3\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          className: \"profpics\",\n          id: \"profpic31\",\n          name: \"profpic3\",\n          onClick: triggerClick,\n          alt: \"100x100\",\n          src: \"https://\" + userName + \"ajh46unique.s3.us-east-2.amazonaws.com/profpic3.png\",\n          \"data-holder-Rendered\": \"true\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 23\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"visually-hidden\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"profpic3\",\n            type: \"file\",\n            className: \"blocked\",\n            onChange: handleSubmission,\n            name: \"uploader3\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 35\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 29\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 19\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-4 mb-3\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          className: \"profpics\",\n          id: \"profpic41\",\n          name: \"profpic4\",\n          onClick: triggerClick,\n          alt: \"100x100\",\n          src: \"https://\" + userName + \"ajh46unique.s3.us-east-2.amazonaws.com/profpic4.png\",\n          \"data-holder-Rendered\": \"true\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 23\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"visually-hidden\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"profpic4\",\n            type: \"file\",\n            className: \"blocked\",\n            onChange: handleSubmission,\n            name: \"uploader4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 202,\n            columnNumber: 35\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 29\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 19\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-4 mb-3\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          className: \"profpics\",\n          id: \"profpic51\",\n          name: \"profpic5\",\n          onClick: triggerClick,\n          alt: \"100x100\",\n          src: \"https://\" + userName + \"ajh46unique.s3.us-east-2.amazonaws.com/profpic5.png\",\n          \"data-holder-Rendered\": \"true\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 23\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"visually-hidden\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"profpic5\",\n            type: \"file\",\n            className: \"blocked\",\n            onChange: handleSubmission,\n            name: \"uploader5\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 217,\n            columnNumber: 35\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 29\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 19\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-4 mb-3\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          className: \"profpics\",\n          id: \"profpic61\",\n          name: \"profpic6\",\n          onClick: triggerClick,\n          alt: \"100x100\",\n          src: \"https://\" + userName + \"ajh46unique.s3.us-east-2.amazonaws.com/profpic6.png\",\n          \"data-holder-Rendered\": \"true\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 23\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"visually-hidden\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"profpic6\",\n            type: \"file\",\n            className: \"blocked\",\n            onChange: handleSubmission,\n            name: \"uploader6\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 232,\n            columnNumber: 35\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 29\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 19\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-t-13 p-b-9\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 15\n    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"txt10\",\n      children: \"About Me\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"wrap-input100 validate-input\",\n      children: [\"\\u200B\", /*#__PURE__*/_jsxDEV(\"span\", {\n        children: /*#__PURE__*/_jsxDEV(\"textarea\", {\n          id: \"bioBox\",\n          rows: \"50\",\n          cols: \"70\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 23\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 15\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container-login100-form-btn m-t-17\",\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"login100-form-btn\",\n        type: \"button\",\n        onClick: () => {\n          updateBio();\n        },\n        children: \"Save Changes\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 15\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-full text-center p-t-55\",\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => {\n          Logout();\n        },\n        className: \"txt2 bo1\",\n        children: \"logout\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 15\n    }, this)]\n  }, void 0, true);\n}\n\n_s(RenderProfileSetup, \"E2IxNwrwTgqxlcioj1GbDI0cDzA=\", false, function () {\n  return [useNavigate];\n});\n\n_c = RenderProfileSetup;\n\nvar _c;\n\n$RefreshReg$(_c, \"RenderProfileSetup\");","map":{"version":3,"sources":["/home/andru/Documents/work/portfolio/social-network-frontend-portfolio/src/routes/ProfileSetup.jsx"],"names":["getMultipleAccounts","useEffect","useState","useNavigate","useParams","ChkAuth","RenderProfileSetup","props","sessionUser","setSessionUser","auth","setAuth","Navigate","userName","then","user","alert","Logout","localStorage","removeItem","updateBio","bio","document","getElementById","value","data","Username","Updatetype","Key2updt","Value2updt","options","method","headers","body","JSON","stringify","postUrl","console","time","response","fetch","convert","json","timeEnd","log","status","getPics","picNum","picUrl","triggerClick","event","myButton","target","name","click","handleSubmission","file","files","Picnum","id","FormData","append","signinurl","Imgaddy","newimageurl","pic2Replace","src"],"mappings":";;;AAAA,SAASA,mBAAT,QAAoC,0CAApC;AACA,SAASC,SAAT,EAAoBC,QAApB,QAAmC,OAAnC;AACA,SAASC,WAAT,EAAsBC,SAAtB,QAAuC,kBAAvC;AACA,OAAOC,OAAP,MAAoB,YAApB;;;AAIA,eAAe,SAASC,kBAAT,CAA6BC,KAA7B,EAAoC;AAAA;;AACjD;AACA;AACA,QAAM,CAACC,WAAD,EAAcC,cAAd,IAAgCP,QAAQ,CAAE,MAAF,CAA9C;AACA,QAAM,CAACQ,IAAD,EAAOC,OAAP,IAAkBT,QAAQ,CAAE,KAAF,CAAhC;AACA,QAAMU,QAAQ,GAAGT,WAAW,EAA5B;AACA,MAAIU,QAAQ,GAAGL,WAAf;AAIAP,EAAAA,SAAS,CAAE,MAAM;AACf;AACAI,IAAAA,OAAO,GAAGS,IAAV,CAAeC,IAAI,IAAI;AACrB,UAAIA,IAAJ,EAAU;AACVJ,QAAAA,OAAO,CAAC,IAAD,CAAP;AACAF,QAAAA,cAAc,CAACM,IAAD,CAAd,CAFU,CAGV;AACC,OAJD,MAIO;AACJJ,QAAAA,OAAO,CAAC,KAAD,CAAP;AACAF,QAAAA,cAAc,CAAC,KAAD,CAAd;AACAO,QAAAA,KAAK,CAAC,uCAAD,CAAL;AACAJ,QAAAA,QAAQ,CAAC,SAAD,CAAR;AACF;AACF,KAXD;AAYD,GAdQ,EAcP,EAdO,CAAT;;AAgBA,WAASK,MAAT,GAAkB;AAChBC,IAAAA,YAAY,CAACC,UAAb,CAAwB,WAAxB,EADgB,CAEhB;;AACAP,IAAAA,QAAQ,CAAE,GAAF,CAAR;AACD;;AAGD,iBAAeQ,SAAf,GAA4B;AAAE;AAE5B,UAAMC,GAAG,GAAGC,QAAQ,CAACC,cAAT,CAAwB,QAAxB,EAAkCC,KAA9C,CAF0B,CAE0B;AAElD;;AACF,QAAIC,IAAI,GAAG;AAACC,MAAAA,QAAQ,EAAEb,QAAX;AAAqBc,MAAAA,UAAU,EAAE,MAAjC;AACCC,MAAAA,QAAQ,EAAE,KADX;AACkBC,MAAAA,UAAU,EAAER;AAD9B,KAAX,CAL0B,CAS1B;;AACA,QAAIS,OAAO,GAAG;AACdC,MAAAA,MAAM,EAAE,KADM;AAEdC,MAAAA,OAAO,EAAE;AACP,wBAAgB;AADT,OAFK;AAKdC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeV,IAAf;AALQ,KAAd;AAQA,QAAIW,OAAO,GAAG,oCAAd,CAlB0B,CAmB1B;;AACAC,IAAAA,OAAO,CAACC,IAAR,CAAa,mBAAb;AACA,QAAIC,QAAQ,GAAG,MAAMC,KAAK,CAACJ,OAAD,EAAUN,OAAV,CAA1B;AACA,QAAIW,OAAO,GAAG,MAAMF,QAAQ,CAACG,IAAT,EAApB;AACAL,IAAAA,OAAO,CAACM,OAAR,CAAgB,mBAAhB;AACAN,IAAAA,OAAO,CAACO,GAAR,CAAY,oCAAZ;AACAP,IAAAA,OAAO,CAACO,GAAR,CAAYH,OAAZ;;AAEA,QAAKF,QAAQ,CAACM,MAAT,KAAoB,GAApB,IAA2BN,QAAQ,CAACM,MAAT,KAAoB,GAApD,EAAwD;AAAC;AACvD7B,MAAAA,KAAK,CAAC,+BAAD,CAAL,CADsD,CAEtD;AACA;AACA,KAJF,MAIQ,IAAKuB,QAAQ,CAACM,MAAT,KAAoB,GAAzB,EAA6B;AAAE;AACrCR,MAAAA,OAAO,CAACO,GAAR,CAAY,wCAAZ,EADmC,CAEnC;AACH;AACA;AACG;;AACHhC,MAAAA,QAAQ,CAAE,cAAYJ,WAAd,CAAR;AACG;AACH;;AAED,iBAAesC,OAAf,CAAwBC,MAAxB,EAAgC;AAC9B,QAAIjB,OAAO,GAAG;AACZC,MAAAA,MAAM,EAAE;AADI,KAAd;AAIA,QAAIiB,MAAM,GAAI,aAAanC,QAAb,GAAwB,gDAAxB,GAA2EkC,MAA3E,GAAoF,MAAlG;AAEA,QAAIR,QAAQ,GAAG,MAAMC,KAAK,CAACQ,MAAD,EAASlB,OAAT,CAA1B;;AAEA,QAAKS,QAAQ,CAACM,MAAT,KAAoB,GAApB,IAA2BN,QAAQ,CAACM,MAAT,KAAoB,GAApD,EAAwD;AAAC;AACtD7B,MAAAA,KAAK,CAAC,WAAD,CAAL;AAEA,aAAO,gBAAP,CAHqD,CAG7B;AACzB,KAJF,MAIQ,IAAKuB,QAAQ,CAACM,MAAT,KAAoB,GAAzB,EAA6B;AAAE;AACrC7B,MAAAA,KAAK,CAAC,WAAD,CAAL;AACA,aAAOgC,MAAP;AACA;AACH;;AAGD,WAASC,YAAT,CAAsBC,KAAtB,EAA4B;AAC1B;AACA,QAAIC,QAAQ,GAAG7B,QAAQ,CAACC,cAAT,CAAwB2B,KAAK,CAACE,MAAN,CAAaC,IAArC,CAAf;;AACA,QAAKF,QAAL,EAAgB;AACdA,MAAAA,QAAQ,CAACG,KAAT;AACD;AACF,GApGgD,CAsGjD;;;AACA,iBAAeC,gBAAf,CAAiCL,KAAjC,EAAwC;AACtC,QAAIA,KAAJ,EAAW;AACT,UAAIM,IAAI,GAAIN,KAAK,CAACE,MAAN,CAAaK,KAAb,CAAmB,CAAnB,CAAZ;AACA,UAAIC,MAAM,GAAGR,KAAK,CAACE,MAAN,CAAaO,EAA1B;AACA,UAAIlC,IAAI,GAAG,IAAImC,QAAJ,EAAX;AACAnC,MAAAA,IAAI,CAACoC,MAAL,CAAY,MAAZ,EAAoBL,IAApB,EAJS,CAIiB;;AAC1B/B,MAAAA,IAAI,CAACoC,MAAL,CAAY,MAAZ,EAAoBhD,QAApB;AAEA,UAAIiB,OAAO,GAAG;AACZC,QAAAA,MAAM,EAAE,MADI;AAEZE,QAAAA,IAAI,EAAER;AAFM,OAAd,CAPS,CAWT;;AACA,UAAIqC,SAAS,GAAG,uCAAuCjD,QAAvC,GAAkD,GAAlD,GAAwD6C,MAAxE,CAZS,CAcT;;AACA,UAAInB,QAAQ,GAAG,MAAMC,KAAK,CAACsB,SAAD,EAAYhC,OAAZ,CAA1B;AACA,UAAIW,OAAO,GAAG,MAAMF,QAAQ,CAACG,IAAT,EAApB;AACAL,MAAAA,OAAO,CAACO,GAAR,CAAYH,OAAO,CAACsB,OAApB;AACA,UAAIC,WAAW,GAAGvB,OAAO,CAACsB,OAA1B,CAlBS,CAkByB;;AAClC,UAAIE,WAAW,GAAGP,MAAM,GAAG,GAA3B;AACApC,MAAAA,QAAQ,CAACC,cAAT,CAAwB0C,WAAxB,EAAqCC,GAArC,GAA2CF,WAA3C;AACD;AACF;;AAAA;AAED,sBACU;AAAA,4BACE;AAAM,MAAA,SAAS,EAAC,4BAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,eAKI;AAAK,MAAA,SAAS,EAAC,KAAf;AAAqB,MAAA,KAAK,EAAC,QAA3B;AAAA,8BACI;AAAK,QAAA,SAAS,EAAC,eAAf;AAAA,+BACE;AAAK,UAAA,SAAS,EAAC,UAAf;AAAA,iCACE;AAAK,YAAA,SAAS,EAAC,UAAf;AAA0B,YAAA,EAAE,EAAE,WAA9B;AAA0C,YAAA,IAAI,EAAC,UAA/C;AAA2D,YAAA,OAAO,EAAEf,YAApE;AAAkF,YAAA,GAAG,EAAC,KAAtF;AAA4F,YAAA,GAAG,EAAC,EAAhG;AACE,oCAAqB;AADvB;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cADJ,eASE;AAAK,QAAA,SAAS,EAAC,iBAAf;AAAA,+BAGU;AAAA,iCACM;AAAO,YAAA,EAAE,EAAC,UAAV;AAAqB,YAAA,IAAI,EAAC,MAA1B;AAAiC,YAAA,SAAS,EAAC,SAA3C;AAAqD,YAAA,QAAQ,EAAEM,gBAA/D;AAAkF,YAAA,IAAI,EAAE;AAAxF;AAAA;AAAA;AAAA;AAAA;AADN;AAAA;AAAA;AAAA;AAAA;AAHV;AAAA;AAAA;AAAA;AAAA,cATF,eAmBM;AAAK,QAAA,SAAS,EAAC,eAAf;AAAA,+BACA;AAAK,UAAA,SAAS,EAAC,UAAf;AAAA,iCACE;AAAK,YAAA,SAAS,EAAC,UAAf;AAA2B,YAAA,EAAE,EAAE,WAA/B;AAA2C,YAAA,IAAI,EAAC,UAAhD;AAA2D,YAAA,OAAO,EAAEN,YAApE;AAAkF,YAAA,GAAG,EAAC,SAAtF;AAAgG,YAAA,GAAG,EAAC,EAApG;AACE,oCAAqB;AADvB;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA,cAnBN,eA0BE;AAAK,QAAA,SAAS,EAAC,iBAAf;AAAA,+BAGU;AAAA,iCACM;AAAO,YAAA,EAAE,EAAC,UAAV;AAAqB,YAAA,IAAI,EAAC,MAA1B;AAAiC,YAAA,SAAS,EAAC,SAA3C;AAAqD,YAAA,QAAQ,EAAEM,gBAA/D;AAAkF,YAAA,IAAI,EAAE;AAAxF;AAAA;AAAA;AAAA;AAAA;AADN;AAAA;AAAA;AAAA;AAAA;AAHV;AAAA;AAAA;AAAA;AAAA,cA1BF,eAoCM;AAAK,QAAA,SAAS,EAAC,eAAf;AAAA,+BACF;AAAK,UAAA,SAAS,EAAC,UAAf;AAA2B,UAAA,EAAE,EAAE,WAA/B;AAA2C,UAAA,IAAI,EAAC,UAAhD;AAA2D,UAAA,OAAO,EAAEN,YAApE;AAAkF,UAAA,GAAG,EAAC,SAAtF;AAAgG,UAAA,GAAG,EAAE,aAAapC,QAAb,GAAwB,qDAA7H;AACE,kCAAqB;AADvB;AAAA;AAAA;AAAA;AAAA;AADE;AAAA;AAAA;AAAA;AAAA,cApCN,eAyCE;AAAK,QAAA,SAAS,EAAC,iBAAf;AAAA,+BAGU;AAAA,iCACM;AAAO,YAAA,EAAE,EAAC,UAAV;AAAqB,YAAA,IAAI,EAAC,MAA1B;AAAiC,YAAA,SAAS,EAAC,SAA3C;AAAqD,YAAA,QAAQ,EAAE0C,gBAA/D;AAAkF,YAAA,IAAI,EAAE;AAAxF;AAAA;AAAA;AAAA;AAAA;AADN;AAAA;AAAA;AAAA;AAAA;AAHV;AAAA;AAAA;AAAA;AAAA,cAzCF,eAmDM;AAAK,QAAA,SAAS,EAAC,eAAf;AAAA,+BACF;AAAK,UAAA,SAAS,EAAC,UAAf;AAA2B,UAAA,EAAE,EAAE,WAA/B;AAA2C,UAAA,IAAI,EAAC,UAAhD;AAA2D,UAAA,OAAO,EAAEN,YAApE;AAAkF,UAAA,GAAG,EAAC,SAAtF;AAAgG,UAAA,GAAG,EAAE,aAAapC,QAAb,GAAwB,qDAA7H;AACE,kCAAqB;AADvB;AAAA;AAAA;AAAA;AAAA;AADE;AAAA;AAAA;AAAA;AAAA,cAnDN,eAwDE;AAAK,QAAA,SAAS,EAAC,iBAAf;AAAA,+BAGU;AAAA,iCACM;AAAO,YAAA,EAAE,EAAC,UAAV;AAAqB,YAAA,IAAI,EAAC,MAA1B;AAAiC,YAAA,SAAS,EAAC,SAA3C;AAAqD,YAAA,QAAQ,EAAE0C,gBAA/D;AAAkF,YAAA,IAAI,EAAE;AAAxF;AAAA;AAAA;AAAA;AAAA;AADN;AAAA;AAAA;AAAA;AAAA;AAHV;AAAA;AAAA;AAAA;AAAA,cAxDF,eAkEM;AAAK,QAAA,SAAS,EAAC,eAAf;AAAA,+BACF;AAAK,UAAA,SAAS,EAAC,UAAf;AAA2B,UAAA,EAAE,EAAE,WAA/B;AAA2C,UAAA,IAAI,EAAC,UAAhD;AAA2D,UAAA,OAAO,EAAEN,YAApE;AAAkF,UAAA,GAAG,EAAC,SAAtF;AAAgG,UAAA,GAAG,EAAE,aAAapC,QAAb,GAAwB,qDAA7H;AACE,kCAAqB;AADvB;AAAA;AAAA;AAAA;AAAA;AADE;AAAA;AAAA;AAAA;AAAA,cAlEN,eAuEE;AAAK,QAAA,SAAS,EAAC,iBAAf;AAAA,+BAGU;AAAA,iCACM;AAAO,YAAA,EAAE,EAAC,UAAV;AAAqB,YAAA,IAAI,EAAC,MAA1B;AAAiC,YAAA,SAAS,EAAC,SAA3C;AAAqD,YAAA,QAAQ,EAAE0C,gBAA/D;AAAkF,YAAA,IAAI,EAAE;AAAxF;AAAA;AAAA;AAAA;AAAA;AADN;AAAA;AAAA;AAAA;AAAA;AAHV;AAAA;AAAA;AAAA;AAAA,cAvEF,eAiFM;AAAK,QAAA,SAAS,EAAC,eAAf;AAAA,+BACF;AAAK,UAAA,SAAS,EAAC,UAAf;AAA2B,UAAA,EAAE,EAAE,WAA/B;AAA2C,UAAA,IAAI,EAAC,UAAhD;AAA2D,UAAA,OAAO,EAAEN,YAApE;AAAkF,UAAA,GAAG,EAAC,SAAtF;AAAgG,UAAA,GAAG,EAAE,aAAapC,QAAb,GAAwB,qDAA7H;AACE,kCAAqB;AADvB;AAAA;AAAA;AAAA;AAAA;AADE;AAAA;AAAA;AAAA;AAAA,cAjFN,eAsFE;AAAK,QAAA,SAAS,EAAC,iBAAf;AAAA,+BAGU;AAAA,iCACM;AAAO,YAAA,EAAE,EAAC,UAAV;AAAqB,YAAA,IAAI,EAAC,MAA1B;AAAiC,YAAA,SAAS,EAAC,SAA3C;AAAqD,YAAA,QAAQ,EAAE0C,gBAA/D;AAAkF,YAAA,IAAI,EAAE;AAAxF;AAAA;AAAA;AAAA;AAAA;AADN;AAAA;AAAA;AAAA;AAAA;AAHV;AAAA;AAAA;AAAA;AAAA,cAtFF;AAAA;AAAA;AAAA;AAAA;AAAA,YALJ,eAsGE;AAAK,MAAA,SAAS,EAAC;AAAf;AAAA;AAAA;AAAA;AAAA,YAtGF,eAwGI;AAAM,MAAA,SAAS,EAAC,OAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAxGJ,eA2GE;AAAK,MAAA,SAAS,EAAC,8BAAf;AAAA,wCAEE;AAAA,+BAAM;AAAU,UAAA,EAAE,EAAC,QAAb;AAAsB,UAAA,IAAI,EAAC,IAA3B;AAAgC,UAAA,IAAI,EAAC;AAArC;AAAA;AAAA;AAAA;AAAA;AAAN;AAAA;AAAA;AAAA;AAAA,cAFF;AAAA;AAAA;AAAA;AAAA;AAAA,YA3GF,eAgHE;AAAK,MAAA,SAAS,EAAC,oCAAf;AAAA,6BACE;AAAQ,QAAA,SAAS,EAAC,mBAAlB;AAAsC,QAAA,IAAI,EAAC,QAA3C;AAAoD,QAAA,OAAO,EAAE,MAAK;AAACnC,UAAAA,SAAS;AAAG,SAA/E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YAhHF,eAqHE;AAAK,MAAA,SAAS,EAAC,2BAAf;AAAA,6BAME;AAAQ,QAAA,OAAO,EAAE,MAAM;AAACH,UAAAA,MAAM;AAAG,SAAjC;AAAmC,QAAA,SAAS,EAAC,UAA7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AANF;AAAA;AAAA;AAAA;AAAA,YArHF;AAAA,kBADV;AAkID;;GAlQuBX,kB;UAKLH,W;;;KALKG,kB","sourcesContent":["import { getMultipleAccounts } from '@project-serum/anchor/dist/cjs/utils/rpc';\nimport { useEffect, useState} from 'react'\nimport { useNavigate, useParams } from 'react-router-dom';\nimport ChkAuth from '../chkAuth';\n \n\n\nexport default function RenderProfileSetup (props) { \n  //alert(\"called setup\")\n  //UseState to hold uploaded file for sending\n  const [sessionUser, setSessionUser] = useState (\"nonw\")\n  const [auth, setAuth] = useState (false);\n  const Navigate = useNavigate();\n  let userName = sessionUser\n\n\n\n  useEffect( () => {\n    //alert(\"useeffect\")\n    ChkAuth().then(user => {\n      if (user) {\n      setAuth(true)\n      setSessionUser(user)\n      //alert(\"user returnedddddd from chkauth\", user)\n      } else {\n         setAuth(false)\n         setSessionUser(false)\n         alert(\"You need to sign in to view this page\")\n         Navigate(\"/signIn\")\n      }\n    })\n  },[]);\n\n  function Logout (){\n    localStorage.removeItem('jwt_token')\n    //alert(\"deleted jwt\")\n    Navigate (\"/\")\n  }\n\n\n  async function updateBio () { // sends username, password from input server then creates s3 bucket in username and stores details on mongo\n    \n    const bio = document.getElementById('bioBox').value;// get username password and email\n      \n      // data to be sent in request to api includinb id of mongodb document\n    let data = {Username: userName, Updatetype: '$set',\n                Key2updt: 'Bio', Value2updt: bio\n    }\n\n    // object containing fetch options for the put request\n    let options = {\n    method: 'PUT',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify(data),\n    }\n\n    let postUrl = 'http://192.168.1.93:4001/updatebio'\n    // post request using options object\n    console.time(\"put response took\");\n    let response = await fetch(postUrl, options)\n    let convert = await response.json ()\n    console.timeEnd(\"put response took\");\n    console.log(\"Put completed updated document is:\")\n    console.log(convert)\n\n    if ( response.status === 401 || response.status === 400){// handle not a match\n      alert(\"your bio didnt save try again\")\n      // Navigate(\"/signIn\")\n      //return false   \n     } else if ( response.status === 200){ // if password is a match return auth'd username\n      console.log(\"saved bio, redirecting to profile page\")\n      //alert(\"saved\")\n\t\t\t//document.cookie = \"authjwt=\"+convert.token; // store data in cookie\n\t\t\t//localStorage.setItem('jwt_token', convert.token) // Store JWT in storage\n      //alert(\"Welcome to the club! Please setup your profile\")\n\t\t\tNavigate (\"/profile/\"+sessionUser)\n     }\n  }\n\n  async function getPics (picNum) {\n    let options = {\n      method: 'GET'\n    }\n\n    let picUrl = (\"https://\" + userName + \"ajh46unique.s3.us-east-2.amazonaws.com/profpic\" + picNum + \".png\")\n\n    let response = await fetch(picUrl, options)\n\n    if ( response.status === 401 || response.status === 400){// if user img does not exist\n       alert(\"not found\") \n       \n       return \"./profbkup.jpg\" // return local uplod icon address\n     } else if ( response.status === 200){ // if there is img return its src\n      alert(\"pic there\")\n      return picUrl\n     }\n  }\n\n\n  function triggerClick(event){\n    // clicking image triggers upload button click\n    var myButton = document.getElementById(event.target.name);\n    if ( myButton ) {\n      myButton.click()\n    }\n  }\n\n  // standard post\n  async function handleSubmission (event) {\n    if (event) {\n      let file = (event.target.files[0])\n      let Picnum = event.target.id\n      var data = new FormData() \n      data.append('file', file) // add the file to the form\n      data.append('user', userName)\n    \n      let options = {\n        method: 'POST',\n        body: data, \n      }\n      //Create url to post file passing the username and pic number for storage\n      let signinurl = 'http://192.168.1.93:4001/postfile/' + userName + \"/\" + Picnum\n\n      // post the json\n      let response = await fetch(signinurl, options)\n      let convert = await response.json ()\n      console.log(convert.Imgaddy)\n      let newimageurl = convert.Imgaddy // get posted img address and change profile picture\n      let pic2Replace = Picnum + \"1\"\n      document.getElementById(pic2Replace).src = newimageurl;\n    }\n  };\n\n  return (\n            <>\n              <span className=\"login100-form-title p-b-53\">\n                Create your profile\n              </span>\n                {/*  <!--profpic1--> */}\n                <div className=\"row\" align=\"center\">\n                    <div className=\"col-md-4 mb-3\" >\n                      <div className=\"profpics\">\n                        <img className=\"profpics\" id= \"profpic11\" name=\"profpic1\"  onClick={triggerClick} alt=\"alt\" src=\"\"\n                          data-holder-Rendered=\"true\"/>\n                      </div>\n                      \n\n                  </div>\n                  <div className=\"visually-hidden\">\n                        {/* <!--the picture click triggers a click of find file button using its name prop to pass to func and use as id then same for onChange to upload button.. chain of name = next elements id--> */}\n                      \n                            <div>\n                                  <input id=\"profpic1\" type=\"file\" className=\"blocked\" onChange={handleSubmission}  name= \"uploader1\"/>\n                            </div>\n                            {/* <button type=\"button\" id=\"uploader1\" name=\"profpic1\" onClick=\"(uploadpic(this.name))\" className=\"blocked\">Upload</button> */}\n                      \n                    </div>\n                      {/* <!--profpic2--> */}\n                      <div className=\"col-md-4 mb-3\" >\n                      <div className=\"profpics\">\n                        <img className=\"profpics\"  id= \"profpic21\" name=\"profpic2\" onClick={triggerClick} alt=\"100x100\" src=\"\"\n                          data-holder-Rendered=\"true\"/>\n                                </div>\n\n                  </div>\n                  <div className=\"visually-hidden\">\n                        {/* <!--the picture click triggers a click of find file button using its name prop to pass to func and use as id then same for onChange to upload button.. chain of name = next elements id--> */}\n                      \n                            <div>\n                                  <input id=\"profpic2\" type=\"file\" className=\"blocked\" onChange={handleSubmission}  name= \"uploader2\"/>\n                            </div>\n                            {/* <button type=\"button\" id=\"uploader1\" name=\"profpic1\" onClick=\"(uploadpic(this.name))\" className=\"blocked\">Upload</button> */}\n                      \n                    </div>\n                      {/* <!--profpic3--> */}\n                      <div className=\"col-md-4 mb-3\" >\n                    <img className=\"profpics\"  id= \"profpic31\" name=\"profpic3\" onClick={triggerClick} alt=\"100x100\" src={\"https://\" + userName + \"ajh46unique.s3.us-east-2.amazonaws.com/profpic3.png\"}\n                      data-holder-Rendered=\"true\"/>\n\n                  </div>\n                  <div className=\"visually-hidden\">\n                        {/* <!--the picture click triggers a click of find file button using its name prop to pass to func and use as id then same for onChange to upload button.. chain of name = next elements id--> */}\n                      \n                            <div>\n                                  <input id=\"profpic3\" type=\"file\" className=\"blocked\" onChange={handleSubmission}  name= \"uploader3\"/>\n                            </div>\n                            {/* <button type=\"button\" id=\"uploader1\" name=\"profpic1\" onClick=\"(uploadpic(this.name))\" className=\"blocked\">Upload</button> */}\n                      \n                    </div>\n                      {/* <!--profpic4--> */}\n                      <div className=\"col-md-4 mb-3\" >\n                    <img className=\"profpics\"  id= \"profpic41\" name=\"profpic4\" onClick={triggerClick} alt=\"100x100\" src={\"https://\" + userName + \"ajh46unique.s3.us-east-2.amazonaws.com/profpic4.png\"}\n                      data-holder-Rendered=\"true\"/>\n\n                  </div>\n                  <div className=\"visually-hidden\">\n                        {/* <!--the picture click triggers a click of find file button using its name prop to pass to func and use as id then same for onChange to upload button.. chain of name = next elements id--> */}\n                      \n                            <div>\n                                  <input id=\"profpic4\" type=\"file\" className=\"blocked\" onChange={handleSubmission}  name= \"uploader4\"/>\n                            </div>\n                            {/* <button type=\"button\" id=\"uploader1\" name=\"profpic1\" onClick=\"(uploadpic(this.name))\" className=\"blocked\">Upload</button> */}\n                      \n                    </div>\n                      {/* <!--profpic5--> */}\n                      <div className=\"col-md-4 mb-3\" >\n                    <img className=\"profpics\"  id= \"profpic51\" name=\"profpic5\" onClick={triggerClick} alt=\"100x100\" src={\"https://\" + userName + \"ajh46unique.s3.us-east-2.amazonaws.com/profpic5.png\"}\n                      data-holder-Rendered=\"true\"/>\n\n                  </div>\n                  <div className=\"visually-hidden\">\n                        {/* <!--the picture click triggers a click of find file button using its name prop to pass to func and use as id then same for onChange to upload button.. chain of name = next elements id--> */}\n                      \n                            <div>\n                                  <input id=\"profpic5\" type=\"file\" className=\"blocked\" onChange={handleSubmission}  name= \"uploader5\"/>\n                            </div>\n                            {/* <button type=\"button\" id=\"uploader1\" name=\"profpic1\" onClick=\"(uploadpic(this.name))\" className=\"blocked\">Upload</button> */}\n                      \n                    </div>\n                      {/* <!--profpic6--> */}\n                      <div className=\"col-md-4 mb-3\" >\n                    <img className=\"profpics\"  id= \"profpic61\" name=\"profpic6\" onClick={triggerClick} alt=\"100x100\" src={\"https://\" + userName + \"ajh46unique.s3.us-east-2.amazonaws.com/profpic6.png\"}\n                      data-holder-Rendered=\"true\"/>\n\n                  </div>\n                  <div className=\"visually-hidden\">\n                        {/* <!--the picture click triggers a click of find file button using its name prop to pass to func and use as id then same for onChange to upload button.. chain of name = next elements id--> */}\n                      \n                            <div>\n                                  <input id=\"profpic6\" type=\"file\" className=\"blocked\" onChange={handleSubmission}  name= \"uploader6\"/>\n                            </div>\n                            {/* <button type=\"button\" id=\"uploader1\" name=\"profpic1\" onClick=\"(uploadpic(this.name))\" className=\"blocked\">Upload</button> */}\n                      \n                    </div>\n                      {/* <!--profpic6--> */}\n                </div>                   \n              <div className=\"p-t-13 p-b-9\">\n              </div>\n                <span className=\"txt10\">\n                  About Me\n                </span> \n              <div className=\"wrap-input100 validate-input\">\n                â€‹\n                <span><textarea id=\"bioBox\" rows=\"50\" cols=\"70\"></textarea></span>\n              </div>\n\n              <div className=\"container-login100-form-btn m-t-17\">\n                <button className=\"login100-form-btn\" type=\"button\" onClick={() =>{updateBio()}}>\n                  Save Changes\n                </button>\n              </div>\n              <div className=\"w-full text-center p-t-55\">\n                {/* <span className=\"txt2\">\n                  Not a member?\n                </span> */}\n\n                {/* <a href=\"signup.html\" className=\"txt2 bo1\"> */}\n                <button onClick={() => {Logout()}} className=\"txt2 bo1\" >\n                  logout\n                </button>\n              </div>\n            </>\n          )\n}"]},"metadata":{},"sourceType":"module"}